import time

import logging

import telebot

import config as cfg

import dbmanager as db

bot = telebot.TeleBot(cfg.token)

picsdir = cfg.picsdir


def goodbye(message):
    bot.send_message(message.chat.id, '–≠—Ö, –∫–∞–∫ –∂–∞–ª—å‚Ä¶ –ü—Ä–∏–¥–µ—Ç—Å—è –ø–æ–¥–∞—Ä–∏—Ç—å —Å—Ç–∏–∫–µ—Ä—ã –∫–æ–º—É-–Ω–∏–±—É–¥—å –¥—Ä—É–≥–æ–º—É. –î–æ –≤—Å—Ç—Ä–µ—á–∏! '
                                      '–ï—Å–ª–∏ –ø–µ—Ä–µ–¥—É–º–∞–µ—à—å, –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ "–î–∞"',
                     reply_markup=cfg.default_markup)
    #db.set_state(message.chat.id, cfg.States.ITS_ALL_OVER.value)


@bot.message_handler(commands=['help'])
def help(message):
    bot.send_message(message.chat.id, '–Ø - –±–æ—Ç, –∏ —è –ø–æ–º–æ–≥–∞—é —Å–≤–æ–µ–π –ø–æ–¥—Ä—É–≥–µ –≤ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏, –ø–æ—ç—Ç–æ–º—É —è –±—É–¥—É –æ—á–µ–Ω—å —Ä–∞–¥, –µ—Å–ª–∏ '
                                      '—Ç—ã –∑–∞–ø–æ–ª–Ω–∏—à—å –∞–Ω–∫–µ—Ç—ã –∏–∑ –Ω–∞—à–µ–≥–æ –¥–∏–∞–ª–æ–≥–∞.\n–û —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –Ω–µ–ø–æ–ª–∞–¥–∫–∞—Ö –º–æ–∂–Ω–æ —Å–æ–æ–±—â–∏—Ç—å –µ–º—É: '
                                      '@vysokov_maksim\n–ê –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞–∂–∞—Ç—å /start –∏ –Ω–∞—á–∞—Ç—å —Å –Ω–∞—á–∞–ª–∞ (–∑–∞–ø–æ–ª–Ω—è—Ç—å –æ–¥–Ω—É '
                                      '–∏ —Ç—É –∂–µ –∞–Ω–∫–µ—Ç—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –Ω–µ –Ω—É–∂–Ω–æ: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –∫–æ–¥–æ–≤—ã–µ —Å–ª–æ–≤–∞).')


@bot.message_handler(commands=['start'])
def start(message):
    bot.send_message(message.chat.id, r'–ü—Ä–∏–≤–µ—Ç! –Ø –í–µ—Å–µ–ª—ã–π –ó—É–±. –ë–æ–ª—å—à–µ –≤—Å–µ–≥–æ –Ω–∞ —Å–≤–µ—Ç–µ –ª—é–±–ª—é, –∫–æ–≥–¥–∞ –æ–±–æ –º–Ω–µ –∑–∞–±–æ—Ç—è—Ç—Å—è. üòä '
                                      r'–°–µ–≥–æ–¥–Ω—è —É –º–µ–Ω—è –æ—Ç–ª–∏—á–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, –∏ –ø–æ—ç—Ç–æ–º—É —Ö–æ—á—É —Å–¥–µ–ª–∞—Ç—å —Ç–µ–±–µ –ø–æ–¥–∞—Ä–æ–∫ ‚Äì –∫—Ä—É—Ç—ã–µ —Å—Ç–∏–∫–µ—Ä—ã! '
                                      r'–•–æ—á–µ—à—å –∏—Ö –ø–æ–ª—É—á–∏—Ç—å?', reply_markup=cfg.binary_markup)
    db.set_state(message.chat.id, cfg.States.AGE_REQUEST.value)


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.ITS_ALL_OVER.value)
def restart(message):
    bot.send_message(message.chat.id, '–ï—Å–ª–∏ —Ç—ã –ø–µ—Ä–µ–¥—É–º–∞–ª, –Ω–∞–∂–º–∏ –Ω–∞ /start –∏ –º—ã –≤—Å–µ –Ω–∞—á–Ω–µ–º —Å–Ω–∞—á–∞–ª–∞.')


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.AGE_REQUEST.value)
def age_request(message):
    if message.text in cfg.yes:
        bot.send_message(message.chat.id, '–ê —Å–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –ª–µ—Ç? –£ –º–µ–Ω—è –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É - –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ —Å–ø—Ä–∞—à–∏–≤–∞—é.',
                         reply_markup=cfg.default_markup)
        db.set_state(message.chat.id, cfg.States.OFFERING.value)
    elif message.text in cfg.no:
        goodbye(message)
    else:
        # ioerr_pic = open(picsdir + 'cannot_understand.jpg', 'rb')
        # bot.send_photo(message.chat.id, ioerr_pic, caption='–°–∫–∞–∂–∏ "–î–∞" –∏–ª–∏ "–ù–µ—Ç"')
        bot.send_photo(message.chat.id, 'AgADAgADMakxG0zj8Usu-WtxZFlrmXEFMw4ABAn9j-uT1tUBtNMDAAEC',
                       caption='–°–∫–∞–∂–∏ "–î–∞" –∏–ª–∏ "–ù–µ—Ç"') # cannot_understand.jpg


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.OFFERING.value)
def offer(message):
    try:
        age = int(message.text)
        if age in range(1, 100):
            db.set_age(message.chat.id, str(age))
            bot.send_message(message.chat.id, '–û—Ç–ª–∏—á–Ω–æ! –¢—ã –ø–æ–ª—É—á–∏—à—å —Ü–µ–ª—ã–π –Ω–∞–±–æ—Ä —Å—Ç–∏–∫–µ—Ä–æ–≤ —Å–æ –º–Ω–æ–π –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ '
                                              '—É–¥–µ–ª–∏—à—å –º–Ω–µ –Ω–µ–º–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è. –•–æ—á—É –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å —Ç–æ–±–æ–π —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –∑–¥–æ—Ä–æ–≤–æ–π –∏ '
                                              '–∫—Ä–∞—Å–∏–≤–æ–π —É–ª—ã–±–∫–∏. –ù–æ —Å–Ω–∞—á–∞–ª–∞ —è –¥–æ–ª–∂–µ–Ω —É–∑–Ω–∞—Ç—å, —á—Ç–æ —Ç—ã –∑–Ω–∞–µ—à—å –æ–± —É—Ö–æ–¥–µ –∑–∞ '
                                              '–∑—É–±–∞–º–∏ —Å–µ–π—á–∞—Å. –ó–∞–ø–æ–ª–Ω—è–π –∞–Ω–∫–µ—Ç—É –ø–æ —Å—Å—ã–ª–∫–µ, –≤–æ–∑–≤—Ä–∞—â–∞–π—Å—è –∫–æ –º–Ω–µ –∏ –Ω–∞–ø–∏—à–∏ –∫–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ!\n'
                                              'https://goo.gl/forms/MqPupXSFYP0NVGuK2')
            db.set_state(message.chat.id, cfg.States.KEYWORD_REQUEST.value)
        else:
            bot.send_document(message.chat.id, 'CgADAgAD7AADTOPxS0NyRNWjbziQAg',
                              caption='–ê –µ—Å–ª–∏ —á–µ—Å—Ç–Ω–æ?')
    except ValueError:
        bot.send_document(message.chat.id, 'CgADAgAD7AADTOPxS0NyRNWjbziQAg',
                          caption='–ù–µ –ø–æ–Ω–∏–º–∞—é, –Ω–∞–ø–∏—à–∏ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ.')


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.KEYWORD_REQUEST.value)
def keyword_request(message):
    # if message.text == '/set_age_1':
    #     db.set_age(message.chat.id, '1')
    #     bot.send_message(message.chat.id, '–ö–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ –¥–ª—è –ø–µ—Ä–≤–æ–π –∞–Ω–∫–µ—Ç—ã: –ö–∞—Ä–∏–µ—Å;\n–¥–ª—è –≤—Ç–æ—Ä–æ–π: –ú–∏–∫—Ä–æ–±—ã.')
    # else:
        keyword = cfg.keyword(int(db.get_age(message.chat.id)))[0]
        if message.text in {keyword, '/let_me_in'}:
            bot.send_message(message.chat.id, r'–ú—ã, –∑—É–±—ã, –æ—á–µ–Ω—å –≤–∞–∂–Ω—ã! –ë–ª–∞–≥–æ–¥–∞—Ä—è –Ω–∞–º —Ç—ã –æ—Ç–∫—É—Å—ã–≤–∞–µ—à—å –∏ –∂—É–µ—à—å '
                                              r'–≤—Å–µ —Å–∞–º–æ–µ –≤–∫—É—Å–Ω–æ–µ –∏ –ø–æ–ª–µ–∑–Ω–æ–µ, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–∏–∑–Ω–æ—Å–∏—à—å –∑–≤—É–∫–∏, –∫–æ–≥–¥–∞ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–µ—à—å, '
                                              r'–∏ –æ–±–∞—è—Ç–µ–ª—å–Ω–æ —É–ª—ã–±–∞–µ—à—å—Å—è. –¢–µ–ø–µ—Ä—å —è —Ä–∞—Å—Å–∫–∞–∂—É —Ç–µ–±–µ 10 –≥–ª–∞–≤–Ω—ã—Ö '
                                              r'–ø—Ä–∞–≤–∏–ª –ø–æ —É—Ö–æ–¥—É –∑–∞ –∑—É–±–∞–º–∏, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ —á–∏—Ç–∞–π –∏ –∑–∞–ø–æ–º–∏–Ω–∞–π, —è –≤—Å–µ –ø—Ä–æ–≤–µ—Ä—é! –¢—ã –≥–æ—Ç–æ–≤?',
                             reply_markup=cfg.binary_markup)
            db.set_state(message.chat.id, cfg.States.READINESS_ACCEPTANCE.value)
        else:
            bot.send_message(message.chat.id, '–•–º... –ü–æ–ø—Ä–æ–±—É–π-–∫–∞ –µ—â–µ —Ä–∞–∑. –í—Å–µ –º–æ–∏ –∫–æ–¥–æ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å –∑–∞–≥–ª–∞–≤–Ω–æ–π –±—É–∫–≤—ã!') # –ï—Å–ª–∏ —Ç—ã —É–∫–∞–∑–∞–ª –≤ –∞–Ω–∫–µ—Ç–µ –Ω–µ —Ç–æ—Ç –≤–æ–∑—Ä–∞—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π '
                                          # '–Ω–∞–ø–∏—Å–∞–ª –º–Ω–µ —Ä–∞–Ω—å—à–µ, —Ç–æ –Ω–∞–ø–∏—à–∏ —Å–µ–π—á–∞—Å, –∫–∞–∫–æ–π –≤–æ–∑—Ä–∞—Å—Ç —Ç—ã –≤—ã–±—Ä–∞–ª –≤ –∞–Ω–∫–µ—Ç–µ - '
                                          # '—Ç–æ–≥–¥–∞ —Ç–≤–æ–µ –∫–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ –ø–æ–¥–æ–π–¥–µ—Ç!')
            # db.set_state(message.chat.id, cfg.States.OFFERING.value)


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.READINESS_ACCEPTANCE.value)
def lets_begin(message):
    try:
        if message.text in cfg.yes:
            bot.send_message(message.chat.id, '–ü–æ–µ—Ö–∞–ª–∏!\n‚úì–ü—Ä–∞–≤–∏–ª–æ ‚Ññ1\n–ö–∞—Ä–∏–µ—Å ‚Äì —Å–∞–º–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω–æ–µ –≤ –º–∏—Ä–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–µ. '
                                              r'–£—á–µ–Ω—ã–µ –¥–æ–∫–∞–∑–∞–ª–∏, —á—Ç–æ –ø—Ä–∏—á–∏–Ω–æ–π –∫–∞—Ä–∏–µ—Å–∞ —è–≤–ª—è—é—Ç—Å—è –º–∏–∫—Ä–æ–±—ã. '
                                              r'–ö–æ–≥–¥–∞ —Ç—ã –µ—à—å —Å–ª–∞–¥–∫–æ–µ, –Ω–∞ –∑—É–±–∞—Ö –æ–±—Ä–∞–∑—É–µ—Ç—Å—è '
                                              r'–ª–∏–ø–∫–∏–π –Ω–∞–ª–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç –º–∏–∫—Ä–æ–±–∞–º –∑–∞–∫—Ä–µ–ø–∏—Ç—å—Å—è –Ω–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏, '
                                              r'–∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–º–Ω–æ–∂–∞—Ç—å—Å—è –∏ –≤—ã–¥–µ–ª—è—Ç—å –∫–∏—Å–ª–æ—Ç—É. –≠—Ç–∞ –∫–∏—Å–ª–æ—Ç–∞ —Ä–∞–∑—Ä—É—à–∞–µ—Ç —Ç–≤–µ—Ä–¥—ã–µ '
                                              r'—Ç–∫–∞–Ω–∏ –∑—É–±–æ–≤ –∏ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ—è–≤–ª–µ–Ω–∏—é –¥–µ—Ñ–µ–∫—Ç–æ–≤ (¬´–¥—ã—Ä–æ—á–µ–∫¬ª), '
                                              r'—á—Ç–æ –∏ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞—Ä–∏–µ—Å–æ–º. –í–æ—Ç –ø–æ—á–µ–º—É —Ç–∞–∫ –≤–∞–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Å–ª–∞–¥–∫–æ–µ –∏ '
                                              r'—Å–ª–µ–¥–∏—Ç—å –∑–∞ —á–∏—Å—Ç–æ—Ç–æ–π –∑—É–±–æ–≤!')
            db.set_state(message.chat.id, cfg.States.SLACK.value)
            bot.send_photo(message.chat.id, 'AgADAgADMqkxG0zj8Uvvuw4uq88BGrWgmg4ABFmifWBx9jUD8ScBAAEC',
                           caption='–Ø —Ç—É—Ç —Å —Ç–æ–±–æ–π –∑–∞–±–æ–ª—Ç–∞–ª—Å—è –∏ –∑–∞–±—ã–ª –≤—Å–µ –Ω–∞ —Å–≤–µ—Ç–µ. –ü–æ–º–æ–≥–∏ –º–Ω–µ, '
                                   '–ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—Å–ø–æ–º–Ω–∏—Ç—å –∏–º—è –ª—é–±–∏–º–æ–≥–æ —Ñ—É—Ç–±–æ–ª–∏—Å—Ç–∞.',
                           reply_markup=cfg.puyol_markup, disable_notification=True)
            db.set_state(message.chat.id, cfg.States.RULE1.value)
        elif message.text in cfg.no:
            goodbye(message)
        else:
            bot.send_photo(message.chat.id, 'AgADAgADMakxG0zj8Usu-WtxZFlrmXEFMw4ABAn9j-uT1tUBtNMDAAEC',
                           caption='–°–∫–∞–∂–∏ "–î–∞" –∏–ª–∏ "–ù–µ—Ç"')  # cannot_understand.jpg
    except:
        db.set_state(message.chat.id, cfg.States.READINESS_ACCEPTANCE.value)
        bot.send_message(message.chat.id, '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏ —Å–≤–æ–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.')


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.RULE1.value)
def rule_1_answer(message):
    try:
        if message.text in {'–ü—É–π–æ–ª—å –ö–∞—Ä–ª–µ—Å', '–ö–∞—Ä–ª–µ—Å –ü—É–π–æ–ª—å', '–ø—É–π–æ–ª—å –∫–∞—Ä–ª–µ—Å', '–∫–∞—Ä–ª–µ—Å –ø—É–π–æ–ª—å'}:
            bot.send_message(message.chat.id, '–¢–æ—á–Ω–æ, —Å–ø–∞—Å–∏–±–æ!', reply_markup=cfg.default_markup)
            db.set_state(message.chat.id, cfg.States.SLACK.value)
            bot.send_message(message.chat.id, '‚úì–ü—Ä–∞–≤–∏–ª–æ ‚Ññ2\n–¢—â–∞—Ç–µ–ª—å–Ω–∞—è –≥–∏–≥–∏–µ–Ω–∞ –ø–æ–ª–æ—Å—Ç–∏ —Ä—Ç–∞ - –∑–∞–ª–æ–≥ –∑–¥–æ—Ä–æ–≤—ã—Ö –∑—É–±–æ–≤ –∏ —Å–≤–µ–∂–µ–≥–æ '
                                              '–¥—ã—Ö–∞–Ω–∏—è. –û—á–µ–Ω—å –≤–∞–∂–Ω–æ —á–∏—Å—Ç–∏—Ç—å –∑—É–±—ã –¥–≤–∞–∂–¥—ã –≤ –¥–µ–Ω—å ‚Äì —Å —É—Ç—Ä–∞ –ø–æ—Å–ª–µ –µ–¥—ã –∏ –≤–µ—á–µ—Ä–æ–º '
                                              '–ø–µ—Ä–µ–¥ —Å–Ω–æ–º. –¢–∞–∫–∂–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–µ–º–∞ –ø–∏—â–∏ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–º—ã–≤–∞—Ç—å –ø–æ–ª–æ—Å—Ç—å —Ä—Ç–∞ '
                                              '—Ç–µ–ø–ª–æ–π –≤–æ–¥–æ–π –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∂–µ–≤–∞—Ç–µ–ª—å–Ω—É—é —Ä–µ–∑–∏–Ω–∫—É. –ù–∞—á–∏–Ω–∞—Ç—å —á–∏—Å—Ç–∫—É –Ω—É–∂–Ω–æ —Å '
                                              '–≤–µ—Ä—Ö–Ω–µ–π —á–µ–ª—é—Å—Ç–∏, –∞ –∑–∞—Ç–µ–º - –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ –Ω–∏–∂–Ω—é—é, –∞ –∑–∞—Ç–µ–º –Ω–µ –∑–∞–±—ã—Ç—å –ø–æ—á–∏—Å—Ç–∏—Ç—å —è–∑—ã–∫. '
                                              '–ó—É–±—ã —Å–ª–µ–¥—É–µ—Ç —á–∏—Å—Ç–∏—Ç—å –∏–∑–Ω—É—Ç—Ä–∏ –∏ —Å–Ω–∞—Ä—É–∂–∏ –≤—ã–º–µ—Ç–∞—é—â–∏–º–∏ –¥–≤–∏–∂–µ–Ω–∏—è–º–∏ –æ—Ç –¥–µ—Å–Ω—ã '
                                              '–∫ —Ä–µ–∂—É—â–µ–º—É –∫—Ä–∞—é, –∞ –∂–µ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –∑—É–±–æ–≤ ‚Äì –¥–≤–∏–∂–µ–Ω–∏—è–º–∏ –≤–ø–µ—Ä–µ–¥-–Ω–∞–∑–∞–¥. '
                                              '–°–º–æ—Ç—Ä–∏ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏, –≤—Å–µ –ø—Ä–æ—Å—Ç–æ!', disable_notification=True)
        # gif1 = open(picsdir + 'rule2_1.gif', 'rb')
        # gif2 = open(picsdir + 'rule2_2.gif', 'rb')
            bot.send_document(message.chat.id, 'CgADAgAD7QADTOPxS3rjM6hZAAGIpwI', disable_notification=True)
        # print('rule2_1.gif  ' + tmp.document.file_id)
            bot.send_document(message.chat.id, 'CgADAgAD7gADTOPxSyWL8zZhYUdjAg', disable_notification=True)
        # print('rule2_2.gif  ' + tmp.document.file_id)
            bot.send_message(message.chat.id, '–ß–∏—Å—Ç–∫–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–Ω–∏–º–∞—Ç—å 3 –º–∏–Ω—É—Ç—ã. –ß—Ç–æ–±—ã –Ω–µ —Å—Ç–æ—è—Ç—å —Å —Å–µ–∫—É–Ω–¥–æ–º–µ—Ä–æ–º, –≤–∫–ª—é—á–∞–π '
                                              '—Ç—Ä–µ—Ö–º–∏–Ω—É—Ç–Ω—É—é –ø–µ—Å–Ω—é –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Å—è –ø–æ–ª–µ–∑–Ω—ã–º –¥–µ–ª–æ–º, –ø–æ–∫–∞ –æ–Ω–∞ –∏–≥—Ä–∞–µ—Ç.\n'
                                              '–Ø, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—ã—á–Ω–æ –≤–∫–ª—é—á–∞—é —Å–≤–æ—é –ª—é–±–∏–º—É—é –ø–µ—Å–Ω—é. –£–≥–∞–¥–∞–π –∫–æ—Ç–æ—Ä—É—é: 1, 2, 3, –∏–ª–∏ 4?',
                            disable_notification=True)
        # track1 = open(picsdir + 'track1.mp3', 'rb')
        # track2 = open(picsdir + 'track2.mp3', 'rb')
        # track3 = open(picsdir + 'track3.mp3', 'rb')
        # track4 = open(picsdir + 'track4.mp3', 'rb')
            bot.send_audio(message.chat.id, 'CQADAgAD8QADTOPxS3OsLsyi-pNHAg', title='1', disable_notification=True)
           # print('tr1  ' + tmp.audio.file_id)
            bot.send_audio(message.chat.id, 'CQADAgAD8gADTOPxS1iwGMrUelB1Ag', title='2', disable_notification=True)
            # print('tr2  ' + tmp.audio.file_id)
            bot.send_audio(message.chat.id, 'CQADAgAD8wADTOPxSyO8lNZy7g_fAg', title='3', disable_notification=True)
            # print('tr3  ' + tmp.audio.file_id)
            bot.send_audio(message.chat.id, 'CQADAgAD9AADTOPxS0wZn1aNH7UIAg', title='4', disable_notification=True)
           # print('tr4  ' + tmp.audio.file_id)
            db.set_state(message.chat.id, cfg.States.RULE2.value)
        else:
            bot.send_message(message.chat.id, '–ù–µ—Ç, —Ç–æ—á–Ω–æ –Ω–µ —Ç–∞–∫. –ù–∞–¥–æ –ø–æ–¥—É–º–∞—Ç—å –µ—â–µ...')
    except:
        db.set_state(message.chat.id, cfg.States.RULE1.value)
        bot.send_message(message.chat.id, '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏ —Å–≤–æ–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.')


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.RULE2.value)
def rule_2_answer(message):
    try:
        # fave = open(picsdir + 'favorite.mp3', 'rb')
        bot.send_audio(message.chat.id, 'CQADAgADBgEAAi4U8UsPqcPHYss8mQI',
                       disable_notification=True, title='–õ—é–±–∏–º–∞—è –ø–µ—Å–Ω—è –ó—É–±–∞',
                       caption='–ù–µ —É–≥–∞–¥–∞–ª! –ü–æ—Ç–æ–º—É —á—Ç–æ —Ç—É—Ç –Ω–µ—Ç –º–æ–µ–π –ª—é–±–∏–º–æ–π –ø–µ—Å–Ω–∏. –≠—Ç–∞ –º–æ—è –ª—é–±–∏–º–∞—è ‚òù')
        # print('trfave  ' + tmp.audio.file_id)
        db.set_state(message.chat.id, cfg.States.SLACK.value)
        bot.send_message(message.chat.id, '‚úì–ü—Ä–∞–≤–∏–ª–æ ‚Ññ3\n–û–¥–∏–Ω–∞–∫–æ–≤–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –∫–∞–∫ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è, —Ç–∞–∫ –∏ –æ–±—ã—á–Ω–∞—è (–º–∞–Ω—É–∞–ª—å–Ω–∞—è) '
                                          '–∑—É–±–Ω–∞—è —â–µ—Ç–∫–∞! –ì–ª–∞–≤–Ω–æ–µ - –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏–º–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –í—ã–±–∏—Ä–∞–π –∑—É–±–Ω—É—é —â–µ—Ç–∫—É —Å—Ç—Ä–æ–≥–æ –ø–æ '
                                          '–≤–æ–∑—Ä–∞—Å—Ç—É. –ò—Å–ø–æ–ª—å–∑—É–π –∑—É–±–Ω—É—é —â–µ—Ç–∫—É —Å—Ä–µ–¥–Ω–µ–π –∂–µ—Å—Ç–∫–æ—Å—Ç–∏ (medium), –µ—Å–ª–∏ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥ –ø–æ '
                                          '–ø–æ–∫–∞–∑–∞–Ω–∏—è–º –Ω–µ –Ω–∞–∑–Ω–∞—á–∏—Ç —Ç–µ–±–µ –¥—Ä—É–≥—É—é. –î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –º–æ–∂–Ω–æ –≤—ã–±–∏—Ä–∞—Ç—å —Å —â–µ—Ç–æ—á–∫–æ–π –¥–ª—è —è–∑—ã–∫–∞ '
                                          '(—Å —Ä–µ–∑–∏–Ω–æ–≤—ã–º–∏ —à–∏–ø–∏–∫–∞–º–∏) –Ω–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –º–µ–Ω—è–π –∑—É–±–Ω—É—é —â–µ—Ç–∫—É '
                                          '–∫–∞–∂–¥—ã–µ 2-3 –º–µ—Å—è—Ü–∞. –©–µ—Ç–∫–∞ —Å —Ü–≤–µ—Ç–Ω—ã–º–∏ —â–µ—Ç–∏–Ω–∫–∞–º–∏ —Å–∞–º–∞ –ø–æ–¥—Å–∫–∞–∂–µ—Ç —Ç–µ–±–µ, '
                                          '–∫–æ–≥–¥–∞ –µ–µ –ø–æ—Ä–∞ –∑–∞–º–µ–Ω–∏—Ç—å ‚Äì –µ–µ —Ü–≤–µ—Ç–Ω—ã–µ —â–µ—Ç–∏–Ω–∫–∏ –ø–æ–º–µ–Ω—è—é—Ç —Ü–≤–µ—Ç.')
        bot.send_message(message.chat.id, '–ê —Ç–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–π —Ä–∞–∑–≥–∞–¥–∞—Ç—å —Å–∞–º—É—é —Å–ª–æ–∂–Ω—É—é –≤ –º–∏—Ä–µ –∑–∞–≥–∞–¥–∫—É:\n–ú–æ–∏ –∑—É–±—ã –≤—Å–µ –±–µ–ª–µ–π,\n'
                                          '–†–∞–∑ –∑–∞ —Ä–∞–∑–æ–º –≤–µ—Å–µ–ª–µ–π -\n–û–Ω–∞ —á–∏—Å—Ç–∏—Ç –∑—É–±—ã —á—ë—Ç–∫–æ\n–£ –º–µ–Ω—è ...')
        db.set_state(message.chat.id, cfg.States.RULE3.value)
    except:
        db.set_state(message.chat.id, cfg.States.RULE2.value)
        bot.send_message(message.chat.id, '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏ —Å–≤–æ–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.')


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.RULE3.value)
def rule3_answer(message):
    try:
        if message.text in {'–∑—É–±–Ω–∞—è —â–µ—Ç–∫–∞', '–ó—É–±–Ω–∞—è —â–µ—Ç–∫–∞', '–ó—É–±–Ω–∞—è –©–µ—Ç–∫–∞', '–∑—É–±–Ω–∞—è —â—ë—Ç–∫–∞', '–ó—É–±–Ω–∞—è —â—ë—Ç–∫–∞', '–ó—É–±–Ω–∞—è –©—ë—Ç–∫–∞'}:
            bot.send_message(message.chat.id, '–ú–æ–ª–æ–¥–µ—Ü ‚úå')
            db.set_state(message.chat.id, cfg.States.SLACK.value)
            bot.send_message(message.chat.id, '‚úì–ü—Ä–∞–≤–∏–ª–æ ‚Ññ4\n–û—á–µ–Ω—å –≤–∞–∂–Ω–æ –ø–æ–¥–æ–±—Ä–∞—Ç—å –ø–æ–¥—Ö–æ–¥—è—â—É—é –∏–º–µ–Ω–Ω–æ —Ç–µ–±–µ –∑—É–±–Ω—É—é –ø–∞—Å—Ç—É. '
                                              '–û–Ω–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–≤–æ–µ–º—É –≤–æ–∑—Ä–∞—Å—Ç—É –∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º. –í—ã–±–∏—Ä–∞–π –ø—Ä–æ—Ç–∏–≤–æ–∫–∞—Ä–∏–æ–∑–Ω—ã–µ '
                                              '–∑—É–±–Ω—ã–µ –ø–∞—Å—Ç—ã. –û–Ω–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã –Ω–∞ –Ω–∞—á–∞–ª—å–Ω–æ–π —Å—Ç–∞–¥–∏–∏ –∫–∞—Ä–∏–µ—Å–∞, –∞ —Ç–∞–∫–∂–µ –¥–ª—è –µ–≥–æ '
                                              '–ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏. –° —ç—Ç–æ–π —Ü–µ–ª—å—é –≤ –ø–∞—Å—Ç—É –¥–æ–±–∞–≤–ª—è—é—Ç —Ñ—Ç–æ—Ä, –∫–∞–ª—å—Ü–∏–π, –∫—Å–∏–ª–∏—Ç.',
                             disable_notification=True)
            # pic = open(picsdir + 'tasty_paste.jpg', 'rb')
            bot.send_photo(message.chat.id, 'AgADAgADNqkxG0zj8UtdSozLc0CYOE2lmg4ABM7QmYtiUH3mPCYBAAEC',
                           caption='–ù—É –∏ –∫–æ–Ω–µ—á–Ω–æ, –≤—ã–±–∏—Ä–∞–π –ø–∞—Å—Ç—É, –ø–æ–¥—Ö–æ–¥—è—â—É—é –ø–æ –≤–∫—É—Å—É, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º '
                                   '–Ω–µ –±—ã–ª–æ –∫–æ –º–Ω–µ –ø—Ä–µ—Ç–µ–Ω–∑–∏–π! –î–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å?', disable_notification=True)
            # print('tasty_paste.jpg  ' + tmp.photo[0].file_id)
            db.set_state(message.chat.id, cfg.States.RULE4.value)
        else:
            bot.send_message(message.chat.id, '–ü–æ–¥—É–º–∞–π –µ—â–µ, —è —É–≤–µ—Ä–µ–Ω, —á—Ç–æ —Ç—ã –æ—Ç–≥–∞–¥–∞–µ—à—å! –ò—â–∏ –ø–æ–¥—Å–∫–∞–∑–∫—É –≤ –ø—Ä–∞–≤–∏–ª–µ ‚Ññ3.')
    except:
        db.set_state(message.chat.id, cfg.States.RULE3.value)
        bot.send_message(message.chat.id, '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏ —Å–≤–æ–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.')


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.RULE4.value)
def rule4_answer(message):
    if message.text not in cfg.yes:
        bot.send_message(message.chat.id, '–î–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å –≤–æ–æ–±—â–µ-—Ç–æ! ‚òù')
        #db.set_state(message.chat.id, cfg.States.SLACK.value)
    bot.send_message(message.chat.id, '‚úì–ü—Ä–∞–≤–∏–ª–æ ‚Ññ5\n–ö—Ä–æ–º–µ –∑—É–±–Ω–æ–π —â–µ—Ç–∫–∏ –∏ –∑—É–±–Ω–æ–π –ø–∞—Å—Ç—ã –≤–∞–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ '
                                      '—Å—Ä–µ–¥—Å—Ç–≤–∞ –≥–∏–≥–∏–µ–Ω—ã. –ó—É–±–Ω—ã–µ –Ω–∏—Ç–∏ ‚Äì —Ñ–ª–æ—Å—Å—ã ‚Äì –ø–æ–º–æ–≥–∞—é—Ç –æ—á–∏—Å—Ç–∏—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–∫–∏ –º–µ–∂–¥—É '
                                      '–∑—É–±–∞–º–∏, –∫—É–¥–∞ –Ω–µ –º–æ–≥—É—Ç –ø—Ä–æ–Ω–∏–∫–Ω—É—Ç—å —â–µ—Ç–∏–Ω–∫–∏ –∑—É–±–Ω–æ–π —â–µ—Ç–∫–∏. –û–ø–æ–ª–∞—Å–∫–∏–≤–∞—Ç–µ–ª–∏ –æ—Å–≤–µ–∂–∞—é—Ç '
                                      '–¥—ã—Ö–∞–Ω–∏–µ. –ê —Ç–µ–º, –∫—Ç–æ –Ω–æ—Å–∏—Ç –±—Ä–µ–∫–µ—Ç—ã, –ø–æ–∫–∞–∑–∞–Ω—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –µ—Ä—à–∏–∫–∏ –∏ –∏—Ä—Ä–∏–≥–∞—Ç–æ—Ä ‚Äì '
                                      '—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–ª—è –æ—á–∏—â–µ–Ω–∏—è –∑—É–±–æ–≤ –≤ —Ç—Ä—É–¥–Ω–æ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö —Å—Ç—Ä—É–µ–π –≤–æ–¥—ã. –ü–æ—Å–ª–µ –µ–¥—ã '
                                      '—Å—Ç–æ–∏—Ç –ø–æ–ª–æ—Å–∫–∞—Ç—å —Ä–æ—Ç –ø—Ä–æ—Å—Ç–æ–π –≤–æ–¥–æ–π –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∂–µ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∑–∏–Ω–∫–∏, –Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ '
                                      '–±–µ–∑ —Å–∞—Ö–∞—Ä–∞ (—Å –∫—Å–∏–ª–∏—Ç–æ–º) –∏ –Ω–µ –¥–æ–ª—å—à–µ 10-15 –º–∏–Ω—É—Ç. –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–æ —Å–º—ã—Ç—å —Å '
                                      '–ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –∑—É–±–æ–≤ –≤—Ä–µ–¥–Ω—ã–µ –∫–∏—Å–ª–æ—Ç—ã.')
    bot.send_message(message.chat.id, '–ê –∫–∞–∫ —Ç—ã –¥—É–º–∞–µ—à—å, –∫–∞–∫–æ–π –∏–∑ —ç—Ç–∏—Ö —Ñ–∞–∫—Ç–æ–≤ (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω) –ø—Ä–æ –∂–µ–≤–∞—Ç–µ–ª—å–Ω—É—é —Ä–µ–∑–∏–Ω–∫—É ‚Äì –ª–æ–∂—å?\n'
                                      '1. –°—É—â–µ—Å—Ç–≤—É—é—Ç –∑–∞–∫–æ–Ω—ã, –∑–∞–ø—Ä–µ—â–∞—é—â–∏–µ –∂–µ–≤–∞—Ç–µ–ª—å–Ω—É—é —Ä–µ–∑–∏–Ω–∫—É.\n'
                                      '2. –ù–∞ –∞—É–∫—Ü–∏–æ–Ω–µ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—É—é –∂–µ–≤–∞—Ç–µ–ª—å–Ω—É—é —Ä–µ–∑–∏–Ω–∫—É –∑–Ω–∞–º–µ–Ω–∏—Ç–æ—Å—Ç–∏ –±—ã–ª–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ 14000$.\n'
                                      '3. –í —Å–æ—Å—Ç–∞–≤ –∂–µ–≤–∞—Ç–µ–ª—å–Ω–æ–π —Ä–µ–∑–∏–Ω–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç —Ä—ã–±–∏–π –∂–∏—Ä.\n'
                                      '4. –ü–µ–Ω—Ç–∞–≥–æ–Ω —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∂–µ–≤–∞—Ç–µ–ª—å–Ω—É—é —Ä–µ–∑–∏–Ω–∫—É.')
    db.set_state(message.chat.id, cfg.States.RULE5.value)


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.RULE5.value)
def rule5_answer(message):
    try:
        if message.text in {'1', '2', '3', '4'}:
            if message.text == '3':
                bot.send_message(message.chat.id, '–ú–æ–ª–æ–¥–µ—Ü, –ø—Ä–∞–≤–∏–ª—å–Ω–æ!')
            elif message.text in {'1', '2', '4'}:
                bot.send_message(message.chat.id,
                                 '–ù–µ—Ç, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –≤ —Å–æ—Å—Ç–∞–≤ –∂–µ–≤–∞—Ç–µ–ª—å–Ω–æ–π —Ä–µ–∑–∏–Ω–∫–∏ –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç —Ä—ã–±–∏–π –∂–∏—Ä, '
                                 '–∞ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç—ã –≤–µ—Ä–Ω—ã.')
            db.set_state(message.chat.id, cfg.States.SLACK.value)
            bot.send_message(message.chat.id, '‚úì–ü—Ä–∞–≤–∏–ª–æ ‚Ññ 6\n–û–¥–Ω–∏–º –∏–∑ –≥–ª–∞–≤–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ –∫—Ä–µ–ø–∫–∏—Ö –∑—É–±–æ–≤ –∏ –≤—Å–µ–≥–æ –æ—Ä–≥–∞–Ω–∏–∑–º–∞ '
                                              '—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ. –ó–∞–ø–æ–º–Ω–∏ —Å–ø–∏—Å–æ–∫ —Å–∞–º—ã—Ö –≤—Ä–µ–¥–Ω—ã—Ö –¥–ª—è –∑—É–±–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤: '
                                              '—Å–ª–∞–¥–æ—Å—Ç–∏, —Å–ª–∞–¥–∫–∏–µ –≥–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏, –∂–∞—Ä–µ–Ω—ã–µ —Å–µ–º–µ—á–∫–∏ –∏ –æ—Ä–µ—Ö–∏, –±–æ–ª—å—à–æ–µ '
                                              '–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º—è–≥–∫–∏—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –∫–æ—Ñ–µ, –∞–ª–∫–æ–≥–æ–ª—å. –ù–µ–≥–∞—Ç–∏–≤–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —ç–º–∞–ª—å '
                                              '–∑—É–±–æ–≤ –æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–ø–∞–¥—ã —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, –ø–æ—ç—Ç–æ–º—É –Ω–µ —Å—Ç–æ–∏—Ç —É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å '
                                              '–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—á–µ–Ω—å –≥–æ—Ä—è—á–∏–µ –∏ —Ö–æ–ª–æ–¥–Ω—ã–µ –±–ª—é–¥–∞ –∏ –Ω–∞–ø–∏—Ç–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–ø–∏–≤–∞—Ç—å '
                                              '–º–æ—Ä–æ–∂–µ–Ω–Ω–æ–µ –≥–æ—Ä—è—á–∏–º —á–∞–µ–º). –ï—à—å —Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã, –≥–¥–µ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∫–∞–ª—å—Ü–∏—è, —Ñ—Ç–æ—Ä–∞, '
                                              '—Ñ–æ—Å—Ñ–æ—Ä–∞. –ü–æ—ç—Ç–æ–º—É —Å–º–µ–ª–æ –Ω–∞–ª–µ–≥–∞–π –Ω–∞ –º–æ–ª–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã, —Ä—ã–±—É, —Ñ—Ä—É–∫—Ç—ã, –æ–≤–æ—â–∏ –∏ '
                                              '—è–≥–æ–¥—ã. –í–æ—Ç —è –∏—Ö –æ—á–µ–Ω—å –ª—é–±–ª—é!', disable_notification=True)
            bot.send_photo(message.chat.id, 'AgADAgAD76gxGy4U8Uu3-fULE7GzFNYOnA4ABPsWaHUylBOZ-y0BAAEC',
                           caption='–ö–∞–∂–µ—Ç—Å—è, –º–Ω–µ —Å–Ω–æ–≤–∞ –Ω–µ —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è –±–µ–∑ —Ç–≤–æ–µ–π –ø–æ–º–æ—â–∏. –ß—Ç–æ –ª–µ–∂–∏—Ç –Ω–∞ —Å—Ç–æ–ª–µ –Ω–∞ –ø–µ—Ä–≤–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–µ, '
                                   '–Ω–æ –Ω–µ –ª–µ–∂–∏—Ç –Ω–∞ —Å—Ç–æ–ª–µ –Ω–∞ –≤—Ç–æ—Ä–æ–π?', disable_notification=True)
            db.set_state(message.chat.id, cfg.States.RULE6.value)
        else:
            bot.send_photo(message.chat.id, 'AgADAgADMakxG0zj8Usu-WtxZFlrmXEFMw4ABAn9j-uT1tUBtNMDAAEC',
                           caption='–ù–µ –ø–æ–Ω–∏–º–∞—é... 1, 2, 3, –∏–ª–∏ 4?')  # cannot_understand.jpg
    except:
        db.set_state(message.chat.id, cfg.States.RULE5.value)
        bot.send_message(message.chat.id, '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏ —Å–≤–æ–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.')


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.RULE6.value)
def rule6_answer(message):
    try:
        if message.text in {'—á–µ—Å–Ω–æ–∫', '–ß–µ—Å–Ω–æ–∫'}:
            bot.send_message(message.chat.id, '–ö–∞–∫–æ–π —Ç—ã –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å–Ω—ã–π!')
            db.set_state(message.chat.id, cfg.States.SLACK.value)
            bot.send_message(message.chat.id, '‚úì–ü—Ä–∞–≤–∏–ª–æ ‚Ññ7\n–†–∞–∑ –≤ –ø–æ–ª–≥–æ–¥–∞ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –æ—Å–º–æ—Ç—Ä —É –≤—Ä–∞—á–∞-—Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∞. '
                                              '–û–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç –∑—É–±—ã –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∫–∞—Ä–∏–µ—Å–∞. –ù–∞—á–∞–ª—å–Ω—ã–π –∫–∞—Ä–∏–µ—Å –ª–µ—á–∏—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ –∏ –ø—Ä–æ—â–µ. '
                                              '–ö –¥–æ–∫—Ç–æ—Ä—É —Å—Ç–æ–∏—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –ª—é–±—ã—Ö –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã—Ö –∏–ª–∏ –±–æ–ª–µ–∑–Ω–µ–Ω–Ω—ã—Ö '
                                              '–æ—â—É—â–µ–Ω–∏–π, –ø–æ—Ç–æ–º—É —á—Ç–æ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –∑—É–±–æ–≤ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —Å–∞–º–∏ –ø–æ —Å–µ–±–µ. –°—Ç–æ–º–∞—Ç–æ–ª–æ–≥ '
                                              '–æ–ø—Ä–µ–¥–µ–ª–∏—Ç –≤–æ–∑–Ω–∏–∫—à—É—é –ø—Ä–æ–±–ª–µ–º—É, —Ä–µ—à–∏—Ç –µ–µ –∏ –¥–∞—Å—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.',
                             disable_notification=True)
            bot.send_photo(message.chat.id, 'AgADAgAD8qgxGy4U8Uvd1xUU-Rp_c9ydmg4ABARo1pmgubre1ikBAAEC',
                           caption='–ö–∞–∫ —Å—á–∏—Ç–∞–µ—à—å, –¥–µ–≤—É—à–∫–µ –Ω—É–∂–Ω–æ –∫ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥—É?', disable_notification=True)
            db.set_state(message.chat.id, cfg.States.RULE7.value)
        else:
            bot.send_message(message.chat.id, '–°–º–æ—Ç—Ä–∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–µ–µ, –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∏, –±–µ–ª—ã–π —Ç–∞–∫–æ–π.')
    except:
        db.set_state(message.chat.id, cfg.States.RULE6.value)
        bot.send_message(message.chat.id, '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏ —Å–≤–æ–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.')


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.RULE7.value)
def rule7_answer(message):
    try:
        bot.send_message(message.chat.id, '‚úì–ü—Ä–∞–≤–∏–ª–æ ‚Ññ8\n–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –¥–æ–º–∞—à–Ω–µ–π —á–∏—Å—Ç–∫–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è '
                                          '–Ω–∞–ª–µ—Ç–∞ —Å –∑—É–±–æ–≤ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –ø–æ–ª–æ—Å—Ç–∏ —Ä—Ç–∞. –ö–∞–∂–¥—ã–µ –ø–æ–ª–≥–æ–¥–∞ '
                                          '–Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –≥–∏–≥–∏–µ–Ω—É –≤ –∫–∞–±–∏–Ω–µ—Ç–µ —É —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∞. –¢–∞–∫–∞—è '
                                          '–ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —á–∏—Å—Ç–∫—É –∑—É–±–æ–≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ '
                                          '–¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –º—è–≥–∫–æ–≥–æ –∏ –ø–∏–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞–ª–µ—Ç–∞, –ø–æ–ª–∏—Ä–æ–≤–∫—É –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–µ–π –∑—É–±–æ–≤, –∞ '
                                          '—Ç–∞–∫–∂–µ —Ñ—Ç–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ - –ø–æ–∫—Ä—ã—Ç–∏–µ –∑—É–±–æ–≤ –∑–∞—â–∏—â–∞—é—â–∏–º –æ—Ç –∫–∞—Ä–∏–µ—Å–∞ –ª–∞–∫–æ–º.')
        db.set_state(message.chat.id, cfg.States.SLACK.value)
        bot.send_photo(message.chat.id, 'AgADAgAD8KgxGy4U-UuQRsVzbE7yyJwKMw4ABPmjW2g9GKZ0Fs8DAAEC',
                       caption='–ê —á—Ç–æ –±—ã —Ç—ã –ø–æ—Å–æ–≤–µ—Ç–æ–≤–∞–ª —ç—Ç–æ–º—É –ø–∞—Ü–∏–µ–Ω—Ç—É?')
        db.set_state(message.chat.id, cfg.States.RULE8.value)
    except:
        db.set_state(message.chat.id, cfg.States.RULE7.value)
        bot.send_message(message.chat.id, '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏ —Å–≤–æ–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.')


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.RULE8.value)
def rule8_answer(message):
    try:
        bot.send_message(message.chat.id, '‚úì–ü—Ä–∞–≤–∏–ª–æ ‚Ññ9\n–û—Ç–∫–∞–∂–∏—Å—å –æ—Ç –≤—Ä–µ–¥–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫! –ï—Å–ª–∏ —Ç—ã –∫—É—Å–∞–µ—à—å —Ä—É—á–∫–∏ –∏ –∫–∞—Ä–∞–Ω–¥–∞—à–∏, '
                                      '–≥—Ä—ã–∑–µ—à—å –Ω–æ–≥—Ç–∏, –ø–µ—Ä–µ–∫—É—Å—ã–≤–∞–µ—à—å –Ω–∏—Ç–∫–∏ –∏–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—à—å –∑—É–±–∞–º–∏ —É–ø–∞–∫–æ–≤–∫–∏ –∏ –∫—Ä—ã—à–∫–∏, '
                                      '—ç—Ç–æ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –ø—Ä–∏—á–∏–Ω–æ–π –ø–æ—è–≤–ª–µ–Ω–∏—è –¥–µ—Ñ–µ–∫—Ç–æ–≤ —ç–º–∞–ª–∏ –∑—É–±–æ–≤. –ê —Å–∞–º–∞—è –ø–∞–≥—É–±–Ω–∞—è '
                                      '–ø—Ä–∏–≤—ã—á–∫–∞ - –∫—É—Ä–µ–Ω–∏–µ, –ø–æ—Å–∫–æ–ª—å–∫—É —Å–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –Ω–µ —Ç–æ–ª—å–∫–æ –∑—É–±–æ–≤ –∏ –¥–µ—Å–µ–Ω, '
                                      '–Ω–æ –∏ –≤—Å–µ–≥–æ –æ—Ä–≥–∞–Ω–∏–∑–º–∞. –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è –∑—É–±–æ–≤ —É –∫—É—Ä–∏–ª—å—â–∏–∫–∞ —É—Å–∫–æ—Ä—è–µ—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ '
                                      '—Ä–∞–∑. –ü–æ–¥ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ–º –≥–æ—Ä—è—á–µ–≥–æ –¥—ã–º–∞ —Å–∏–≥–∞—Ä–µ—Ç—ã –≤ —ç–º–∞–ª–∏ –∑—É–±–æ–≤ –ø–æ—è–≤–ª—è—é—Ç—Å—è –º–∏–∫—Ä–æ—Ç—Ä–µ—â–∏–Ω—ã, '
                                      '—Ç—É–¥–∞ –ø—Ä–æ–Ω–∏–∫–∞—é—Ç –Ω–∏–∫–æ—Ç–∏–Ω–æ–≤—ã–µ —Å–º–æ–ª—ã –∫–æ—Ä–∏—á–Ω–µ–≤–æ–≥–æ —Ü–≤–µ—Ç–∞. –í—ã—á–∏—Å—Ç–∏—Ç—å –∏—Ö –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –¥–∞–∂–µ '
                                      '—Å –ø–æ–º–æ—â—å—é –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —á–∏—Å—Ç–∫–∏ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∞ –£ –∑–∞—è–¥–ª—ã—Ö –∫—É—Ä–∏–ª—å—â–∏–∫–æ–≤ '
                                      '—Ç–µ–º–Ω–µ—é—Ç –∑—É–±—ã –∏ –ø–ª–æ—Ö–æ –ø–∞—Ö–Ω–µ—Ç –∏–∑–æ —Ä—Ç–∞.')
        db.set_state(message.chat.id, cfg.States.SLACK.value)
        bot.send_photo(message.chat.id, 'AgADAgAD8agxGy4U-UudkVVodJunkDukmg4ABCrtyU1efsS8kywBAAEC',
                       caption='–ö–∞–∫ —Ç—ã –¥—É–º–∞–µ—à—å, –î–∂–µ–π—Å–æ–Ω –°—Ç–µ–π—Ç–µ–º —ç—Ç–æ –≥–æ–≤–æ—Ä–∏–ª?', disable_notification=True)
        db.set_state(message.chat.id, cfg.States.RULE9.value)
    except:
        db.set_state(message.chat.id, cfg.States.RULE8.value)
        bot.send_message(message.chat.id, '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏ —Å–≤–æ–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.')


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.RULE9.value)
def rule9_answer(message):
    try:
        bot.send_message(message.chat.id, '–ê —è –Ω–µ –∑–Ω–∞—é! –í –ª—é–±–æ–º —Å–ª—É—á–∞–µ, —ç—Ç–∏ —Å–ª–æ–≤–∞ ‚Äì —á–∏—Å—Ç–∞—è –ø—Ä–∞–≤–¥–∞!')
        db.set_state(message.chat.id, cfg.States.SLACK.value)
        bot.send_message(message.chat.id, '‚úì–ü—Ä–∞–≤–∏–ª–æ ‚Ññ10\n–î–ª—è –∑–¥–æ—Ä–æ–≤—å—è –∑—É–±–æ–≤ –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ, —á—Ç–æ–± –æ–Ω–∏ –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º '
                                      '–ø–æ–ª–æ–∂–µ–Ω–∏–∏. –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ —Ç–∞–∫, —Ç–æ –ø—Ä–∏ –∂–µ–≤–∞–Ω–∏–∏ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –∑—É–±—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è '
                                      '–Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö –æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω—ã, —á—Ç–æ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º '
                                      '–ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –∏—Ö —Ä–∞—Å—à–∞—Ç—ã–≤–∞–Ω–∏—é –∏ –≤—ã–ø–∞–¥–µ–Ω–∏—é. –û–∫–∞–∑–∞–≤—à–∏—Å—å –≤ –∂–µ–ª—É–¥–∫–µ, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ '
                                      '–ø–µ—Ä–µ–∂–µ–≤–∞–Ω–Ω–∞—è –ø–∏—â–∞ –±—É–¥–µ—Ç –ø–ª–æ—Ö–æ —É—Å–≤–∞–∏–≤–∞—Ç—å—Å—è, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —Å—Ç—Ä–∞–¥–∞—Ç—å –±—É–¥–µ—Ç '
                                      '–≤–µ—Å—å –æ—Ä–≥–∞–Ω–∏–∑–º. –ü–æ—ç—Ç–æ–º—É –º—ã —Å —Ç–æ–±–æ–π —Ç–∞–∫ —á–∞—Å—Ç–æ –º–æ–∂–µ–º –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –ª—é–¥–µ–π —Å –±—Ä–µ–∫–µ—Ç–∞–º–∏ '
                                      '–Ω–∞ –∑—É–±–∞—Ö. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –æ–Ω–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –ª–µ—á–µ–Ω–∏–µ —É —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∞-–æ—Ä—Ç–æ–¥–æ–Ω—Ç–∞ –∏ –ø—Ä–∏–≤–æ–¥—è—Ç '
                                      '—Å–≤–æ–∏ –∑—É–±—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ, –≤–µ–¥—å —Ç–µ–ø–µ—Ä—å –º—ã –ø–æ–Ω–∏–º–∞–µ–º, —á—Ç–æ —Ä–æ–≤–Ω–∞—è —É–ª—ã–±–∫–∞ - '
                                      '—ç—Ç–æ –Ω–µ —Ç–æ–ª—å–∫–æ –∫—Ä–∞—Å–æ—Ç–∞, –Ω–æ –∏ –∑–¥–æ—Ä–æ–≤—å–µ –∑—É–±–æ–≤ –∏ –æ—Ä–≥–∞–Ω–∏–∑–º–∞ –≤ —Ü–µ–ª–æ–º.',
                     disable_notification=True)
        bot.send_photo(message.chat.id, 'AgADAgAD86gxGy4U-UsLzd4R7T1k_y30Aw4ABPPs3tAjL1Xzaw0DAAEC', disable_notification=True)
        bot.send_photo(message.chat.id, 'AgADAgAD8qgxGy4U-UtL443pcou00W7qAw4ABOpliQuxSXjC5QkDAAEC',
                       caption='–¢–µ–ø–µ—Ä—å —Ç—ã –∑–Ω–∞–µ—à—å, –∑–∞—á–µ–º –Ω—É–∂–Ω—ã –±—Ä–µ–∫–µ—Ç—ã?', disable_notification=True)
        db.set_state(message.chat.id, cfg.States.RULE10.value)
    except:
        db.set_state(message.chat.id, cfg.States.RULE9.value)
        bot.send_message(message.chat.id, '–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–≤—Ç–æ—Ä–∏ —Å–≤–æ–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.')


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.RULE10.value)
def rule10_answer(message):
    bot.send_message(message.chat.id, '–í–æ—Ç —ç—Ç–æ –¥–∞! –¢—ã —Ç–µ—Ä–ø–µ–ª–∏–≤–æ –≤—ã—Å–ª—É—à–∞–ª –º–µ–Ω—è –¥–æ —Å–∞–º–æ–≥–æ –∫–æ–Ω—Ü–∞, —Ç—ã –≤ —à–∞–≥–µ –æ—Ç –ø–æ–ª—É—á–µ–Ω–∏—è '
                                      '–∑–∞–≤–µ—Ç–Ω—ã—Ö —Å—Ç–∏–∫–µ—Ä–æ–≤! –ü—Ä–æ–≤–µ—Ä–∏–º —Ç–≤–æ–∏ –∑–Ω–∞–Ω–∏—è —Ç–µ–ø–µ—Ä—å. –°–∫–æ—Ä–µ–µ –ø—Ä–æ—Ö–æ–¥–∏ –∞–Ω–∫–µ—Ç—É –µ—â–µ —Ä–∞–∑ –∏ '
                                      '–ø—Ä–∏—Å—ã–ª–∞–π –º–Ω–µ –æ—Ç—Ç—É–¥–∞ —Ç–≤–æ–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ –∫–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ! –£–¥–∞—á–∏!\n'
                                      'https://goo.gl/forms/fG2i6rmwPKgtJqtt1')
    db.set_state(message.chat.id, cfg.States.FINISH_HIM.value)


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.FINISH_HIM.value)
def stickersgiving(message):
    bot.send_message(message.chat.id, '–Ø —Ç–æ–±–æ–π –≥–æ—Ä–∂—É—Å—å! –î–µ—Ä–∂–∏ –∑–∞—Å–ª—É–∂–µ–Ω–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫!')
    db.set_state(message.chat.id, cfg.States.THE_END.value)


@bot.message_handler(func=lambda message: db.get_state(message.chat.id) == cfg.States.THE_END.value)
def paschalochki(message):
    bot.send_message(message.chat.id, '–¢—ã –∂–µ —É–∂–µ –≤—Å–µ –ø—Ä–æ—à–µ–ª, –Ω–µ—Ç? –•–æ—á–µ—à—å –µ—â–µ —Ä–∞–∑–æ–∫ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å? –ù—É —Ç–æ–≥–¥–∞ –Ω–∞–∂–º–∏ /start')


while 1 < 2:
    try:
        bot.polling(none_stop=True)
    except Exception as e:
        logging.error(e)
        time.sleep(5)
